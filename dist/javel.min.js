!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("javel",[],e):"object"==typeof exports?exports.javel=e():t.javel=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";var i,n,s;n=[e],void 0===(s="function"==typeof(i=function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=t._cachedApplicationRef=Symbol("_cachedApplicationRef"),r=t._mixinRef=Symbol("_mixinRef"),i=t._originalMixin=Symbol("_originalMixin"),n=t.wrap=((t,e)=>(Object.setPrototypeOf(e,t),t[i]||(t[i]=t),e)),s=t.Cached=(t=>n(t,r=>{let i=t[e];if(i||(i=t[e]=Symbol(t.name)),r.hasOwnProperty(i))return r[i];let n=t(r);return r[i]=n,n})),a=t.HasInstance=(t=>(Symbol.hasInstance&&!t.hasOwnProperty(Symbol.hasInstance)&&Object.defineProperty(t,Symbol.hasInstance,{value:function(t){const e=this[i];for(;null!=t;){if(t.hasOwnProperty(r)&&t[r]===e)return!0;t=Object.getPrototypeOf(t)}return!1}}),t)),u=t.BareMixin=(t=>n(t,e=>{let n=t(e);return n.prototype[r]=t[i],n}));t.Mixin=(t=>s(a(u(t)))),t.mix=(t=>new o(t));class o{constructor(t){this.superclass=t}with(){return Array.from(arguments).reduce((t,e)=>e(t),this.superclass)}}})?i.apply(e,n):i)||(t.exports=s)},function(t,e,r){"use strict";r.r(e);var i=r(0);class n{constructor(...t){this.fill(...t)}fill(...t){return this}make(...t){return new this.constructor(...t)}}var s=Object(i.Mixin)(t=>(class extends t{fill(t={},...e){return super.fill(t,...e),this.setAttributes(t),this}make(t={},...e){return Array.isArray(t)?t.map(t=>new this.constructor(t,...e)):new this.constructor(t,...e)}setAttributes(t){Object.assign(this,t)}getAttributes(){return this}primaryKey(){return this.getAttributes().id}exists(){return!!this.primaryKey()}is(t){return this.primaryKey()===t.primaryKey()}clone(){return this.make(Object.assign({},this.getAttributes()))}}));const a=t=>Array.isArray(t[0])?t[0]:t,u=(t,...e)=>(e=a(e),Object.keys(t).filter(t=>!e.includes(t)).reduce((e,r)=>(e[r]=t[r],e),{})),o=t=>t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(t=>t.toLowerCase()).join("_"),c=t=>[].concat(...t.map(t=>Array.isArray(t)?c(t):t));var l=Object(i.Mixin)(t=>(class extends t{fill(...t){return super.fill(...t),this.wrapRelationships(),this}relationships(){return{}}addParentRelationship(){}wrapRelationship(t,e,r,i){let n=new e(t);return n.addParentRelationship(r,i),n}wrapRelationships(){let t=this.getAttributes()||{};((t,e)=>Object.keys(t).forEach(r=>e(t[r],r,t)))(this.relationships(),(e,r)=>{t.hasOwnProperty(r)&&t[r]&&(t[r]=Array.isArray(t[r])?t[r].map(t=>this.wrapRelationship(t,e,this,r)):this.wrapRelationship(t[r],e,this,r))}),this.setAttributes(t)}})),p=Object(i.Mixin)(t=>(class extends t{getAttributes(){return u(super.getAttributes(),"_parent")}clone(){let t=super.clone();return this._parent&&t.addParentRelationship(...this._parent),t}addParentRelationship(t,e){return this._parent=[t,e],this}removeFromParent(){const[t,e]=this._parent;if(Array.isArray(t[e])){const r=t[e].indexOf(this);t[e].splice(r,1)}else t[e]=null}})),h=Object(i.Mixin)(t=>(class extends t{baseUrl(){return"/api"}buildUrl({params:t}){return[o(this.constructor.name),...t]}async request(t){(t=Object.assign({},d,t)).url=((...t)=>a(t).join("/").replace(/[\/]+/g,"/").replace(/^(.+):\//,"$1://").replace(/^file:/,"file:/").replace(/\/(\?|&|#[^!])/g,"$1").replace(/\?/g,"&").replace("&","?"))(c([this.baseUrl(),t.url||this.buildUrl(t)])),t=this.beforeRequest(t);try{let e=await this.makeRequest(t);return this.afterRequest(e,t)}catch(e){return this.failedRequest(e,t)}}makeRequest({method:t,url:e,data:r,query:i}){if(axios)return axios({method:t,url:e,data:r,params:i});throw new Error("Please override the `makeRequest` method and choose your http dependency.")}beforeRequest(t){return t}afterRequest({data:t},{action:e,isStatic:r}){return"paginate"===e?(t.data=this.make(t.data),t):r?this.make(t):this.fill(t)}failedRequest(t){throw t}static all(t={}){return(new this).request({method:"GET",isStatic:!0,action:"all",...t})}static paginate(t={}){return(new this).request({method:"GET",isStatic:!0,action:"paginate",...t})}static find(t,e={}){return(new this).request({method:"GET",isStatic:!0,action:"find",params:[t],...e})}static create(t,e={}){return(new this).request({method:"POST",isStatic:!0,action:"create",data:t,...e})}persist(t=null,e={}){return t=t||this.getAttributes(),this.request({method:"POST",action:"persist",data:t,...e})}update(t,e={}){return this.request({method:"PATCH",action:"update",params:[this.primaryKey()],data:t,...e})}delete(t={}){return this.request({method:"DELETE",action:"delete",params:[this.primaryKey()],...t})}save(t=null,e={}){return t=t||this.getAttributes(),this.exists()?this.update(t,e):this.persist(t,e)}}));const d={action:"custom",isStatic:!1,method:"GET",data:null,params:[]};class f extends(Object(i.mix)(n).with(s,l,p,h)){}var y=Object(i.Mixin)(t=>(class extends t{fill(...t){return super.fill(...t),this.setKey(),this}setKey(){this._key||(this._key=this.exists()?this.primaryKey():function(t="new_"){return`${t}${m++}`}())}getAttributes(){return u(super.getAttributes(),"_key")}}));let m=0;var b=Object(i.Mixin)(t=>(class extends t{update(t,e={}){return t instanceof FormData&&(e={method:"POST",...e},t.append("_method","PATCH")),super.update(t,e)}}));r.d(e,"default",function(){return f}),r.d(e,"Model",function(){return f}),r.d(e,"BaseModel",function(){return n}),r.d(e,"HasAttributes",function(){return s}),r.d(e,"HasRelationships",function(){return l}),r.d(e,"MakesRequests",function(){return h}),r.d(e,"KeepsParentRelationship",function(){return p}),r.d(e,"GeneratesUniqueKey",function(){return y}),r.d(e,"UsesMethodFieldWithFormData",function(){return b}),r.d(e,"mix",function(){return i.mix}),r.d(e,"Mixin",function(){return i.Mixin})}])});